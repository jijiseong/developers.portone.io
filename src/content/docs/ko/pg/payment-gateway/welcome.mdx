---
title: 웰컴페이먼츠
description: 웰컴페이먼츠 연동 방법을 안내합니다.
targetVersions: ["v1"]
---

import Details from "~/components/gitbook/Details.astro";
import Tab from "~/components/gitbook/tabs/Tab.astro";
import Tabs from "~/components/gitbook/tabs/Tabs.astro";
import Hint from "~/components/Hint.astro";

## 1. 웰컴페이먼츠 채널 설정하기

[결제대행사 채널 설정하기](../../ready/readme#3-결제대행사-채널-설정하기) 페이지의 내용을 참고하여 채널 설정을 진행합니다.

## 2. 최신 JavaScript SDK로 업데이트하기 <a href="#2." id="2." />

웰컴페이먼츠 결제는 최신 SDK에서만 지원되는 기능입니다.

```html title="JS SDK"
<script src="https://cdn.iamport.kr/v1/iamport.js"></script>
```

<Hint style="info">
  **웰컴페이먼츠를 연동하기 위해서는 위에 안내된 JS SDK를 이용하셔야 합니다**
</Hint>

[JavaScript SDK](../../sdk/javascript-sdk/readme) 문서를 통해 최신 SDK를 설치해주세요.

## 3.결제 요청하기

[JavaScript SDK](../../sdk/javascript-sdk/readme) `IMP.request_pay(param, callback)`을 호출하여
웰컴페이먼츠 결제/빌링키 발급/빌링키 발급과 동시에 결제창을 호출할 수 있습니다. **트랜잭션 결과**는
PC의 경우 <mark style="color:red;">**callback**</mark> 함수로 전달되고
모바일의 경우 <mark style="color:red;">**m\_redirect\_url**</mark>로 302 리디렉션됩니다.

<Tabs>
  <Tab title="일반 결제 창 요청">
    ```ts title="Javascript SDK"
    IMP.request_pay(
      {
        pg: "welcome.{상점 ID}",
        pay_method: "card",
        merchant_uid: "orderNo0001", // 고객사에서 채번한 주문 고유 번호입니다.
        name: "주문명:결제테스트",
        amount: 1004,
        buyer_email: "test@portone.io",
        buyer_name: "구매자이름",
        buyer_tel: "010-1234-5678",
        m_redirect_url: "{모바일에서 결제 완료 후 리디렉션 될 URL}",
      },
      function (rsp) {
        // callback 로직
        const { imp_uid, merchant_uid } = rsp;

        // 콜백 함수로 전달 받은 imp_uid로 포트원 결제 내역 조회 API를 통해 결제 상태를 판단합니다.
      },
    );
    ```

    <Details>
      <p slot="summary"><strong>주요 파라미터 설명</strong></p>

      **`pg`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`welcome`**</mark>

      **PG사 구분코드**

      **`pay_method`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **결제수단 구분코드**

      - card (신용카드)
      - trans (실시간 계좌이체)
      - vbank (가상계좌)
      - phone (휴대폰소액결제)
      - culturegift (문화상품권)
      - lpay (LPAY)
      - kakaopay (카카오페이)
      - payco (페이코)
      - tosspay (토스페이)

      **`merchant_uid`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **주문 번호**

      매번 고유하게 채번되어야 합니다.

      **`amount`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`integer`**</mark>

      **결제 금액**

      <mark style="color:green;">**string**</mark> 이 아닌 점에 유의하세요.

      **`tax_free`** <mark style="color:green;">**number**</mark>

      **면세 금액**

      **`vat_amount`** <mark style="color:green;">**number**</mark>

      **부가세 금액**

      상점 아이디가 “부가세 업체 정함”으로 설정 된 경우일때만 전달 가능합니다.

      주의: 전체 금액의 10% 이하만 허용 됩니다.

      **`buyer_name`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 이름**

      주의: 웰컴페이먼츠의 경우 구매자 이름은 필수 입력입니다.

      **`buyer_tel`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 연락처**

      주의: 웰컴페이먼츠의 경우 구매자 연락처는 필수 입력입니다.

      **`buyer_email`** <mark style="color:green;">**string**</mark>

      **구매자 이메일 주소**

      **`m_redirect_url`** <mark style="color:green;">**string**</mark>

      **모바일 환경에서 트랜잭션 종료 후 302 리디렉션 될 URL**

      주의: 웰컴페이먼츠의 경우 <mark style="color:red;">**모바일 환경에서 필수 입력**</mark>입니다.

      **`notice_url`** <mark style="color:green;">**string** 또는 **string\[]**</mark>

      **트랜잭션 종료 후 웹훅이 발송 될 고객사 서버 URL**

      주의: notice\_url 파라미터 설정시, 콘솔에 설정 된 웹훅 URL은 override 되며 notice\_url에 전달 한 주소로만 웹훅이 발송됩니다.

      **`confirm_url`** <mark style="color:green;">**string**</mark>

      **트랜잭션 승인 직전 최종 승인 여부를 질의 할 고객사 서버 URL**

      트랜잭션 승인 직전, 포트원 서버에서 confirm\_url로 트랜잭션 최종 승인 여부를 질의하게 되며 200 외의 응답을 받은 경우 트랜잭션은 중단됩니다.

      **`app_scheme`** <mark style="color:green;">**string**</mark>

      **IOS 앱에서 결제시 카드/은행 앱에서 인증 후 복귀 될 고객사 커스텀 앱 URL Scheme**

      - 예: portone://
      - 주의: <mark style="color:red;">**IOS 앱 결제시 필수**</mark> 입력이며 <mark style="color:red;">**앱이 아닌 모바일 웹 결제시에는 입력하지 마세요.**</mark>

      **`currency`** <mark style="color:purple;">**`KRW`**</mark>

      **결제 통화**

      웰컴페이먼츠의 경우 KRW만 허용되며, 미 입력시 KRW로 자동 적용됩니다.

      **`language`** <mark style="color:green;">**string**</mark>

      **결제창 언어 설정**

      - ko(한국어, 기본값)
      - en(영어)
      - zh(중국어)

      **`digital`** <mark style="color:green;">**string**</mark>

      **휴대폰 소액결제시 실물/컨텐츠 여부**

      주의: <mark style="color:red;">**휴대폰 소액결제시 필수 입력**</mark>입니다.

      **`vbank_due`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **가상계좌 입금기한**

      - YYYY-MM-DD
      - YYYY-MM-DD HH:mm:ss
      - YYYYMMDD
      - YYYYMMDDHHmmss

      주의: 웰컴페이먼츠의 경우 무시되며 무조건 59초로 설정 됩니다.

      **`escrow`** <mark style="color:green;">**boolean**</mark>

      **에스크로 결제 여부**

      웰컴페이먼츠의 경우, 카드/계좌이체/가상계좌 결제시 에스크로 결제가 허용됩니다.

      **`useCardPoint`** <mark style="color:green;">**boolean**</mark>

      **카드사 포인트 사용 여부**

      웰컴페이먼츠의 경우, 카드사 포인트 사용 불가 옵션(useCardPoint: false)은 지원하지 않습니다.

      카드사 포인트 사용(useCardPoint: true) 또는 기본값(=파라미터 전달하지 않음, 결제창에서 고객이 카드사 포인트 사용 여부 결정)만 사용 가능합니다.

      **`useFreeInterestFromMall`** <mark style="color:green;">**boolean**</mark>

      **상점 부담 무이자 할부 사용 여부**

      **`period`** <mark style="color:green;">**object**</mark>

      **서비스 제공 기간**

      (from과 to) 또는 interval 중 하나만 입력 가능합니다.

      주의: <mark style="color:red;">모바일 환경 - 휴대폰 소액결제시엔 지원하지 않습니다.</mark>

      - **`from`**: 서비스 제공 시작 시각

      - **`to`**: 서비스 제공 종료 시각

        - YYYY-MM-DD
        - YYYY-MM-DD HH:mm:ss
        - YYYYMMDD
        - YYYYMMDDHHmmss

        웰컴페이먼츠의 경우

        - PC: 날짜까지만 입력 가능하며 시간은 무시됩니다.
        - 모바일: 날짜와 시간 모두 입력 가능하며 초는 무시됩니다.

      - **`interval`**: 서비스 제공 간격
        - 1m: 매월 정기결제
        - 1y: 매년 정기결제

      **`bypass.logo_url`** <mark style="color:green;">**string**</mark>

      결제창에 노출 될 메인 로고 URL(크기: 89x19)로 <mark style="color:red;">**PC 전용**</mark> 파라미터입니다.

      **`bypass.logo_2nd`** <mark style="color:green;">**string**</mark>

      결제창에 노출 될 서브 로고 URL(크기: 64x13)로 <mark style="color:red;">**PC 전용**</mark> 파라미터입니다.

      **`bypass.P_CARD_OPTION`** <mark style="color:green;">**object**</mark>

      <mark style="color:red;">**모바일 카드/간편결제 전용**</mark> 파라미터입니다.

      1. 신용카드 우선 선택 옵션

         예) selcode=14

      - 해당 카드 코드에 해당하는 카드가 선택된 채로 Display
      - 간편결제는 불가능 (타 카드 선택 가능)

      2. 선택적 표시 옵션

         예1) onlycard=visa3d
         예2) selcode=14:onlycard=visa3d

      - 안심결제: visa3d
      - ISP: isp
      - 간편결제: easypay 중 선택 적 표시

      **`bypass.P_ONLY_EASYPAYCODE`** <mark style="color:green;">**string**</mark>

      카드 결제창 내 렌더링 될 간편 결제 리스트를 의미하며 <mark style="color:red;">**모바일 전용**</mark> 파라미터입니다.

      예) 카카오페이, 엘페이, 페이코만 렌더링 →
      ”KAKAOPAY:LPAY:PAYCO” 전달

      - 카카오페이: KAKAOPAY
      - 엘페이: LPAY
      - 페이코: PAYCO
      - 토스페이: TOSSPAY

      **`bypass.acceptmethod`** <mark style="color:green;">**array**</mark>

      <mark style="color:red;">**PC - 카드 결제 전용 파라미터**</mark>

      |형식                             |설명                                                                                                                                                                                                                               |
      |---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |SKIN(색상코드)                   |결제 창의 배경 색상 <br /> - 기본값 : #c1272c <br /> - 예시: SKIN(#fc6b2d)                                                                                                                                                         |
      |below1000                        |1,000원 미만 결제 허용 여부 <br /> - 기본값: 허용하지 않음                                                                                                                                                                         |
      |paypopup                         |안심클릭을 팝업 형태로 렌더링 시킬지 여부 <br /> - 기본값: 레이어                                                                                                                                                                  |
      |onlyeasypaycode(간편 결제 리스트)|카드 결제창 내 렌더링 될 간편 결제 리스트 <br /> 예) 카카오페이, 엘페이, 페이코만 렌더링 → ”kakaopay:lpay:payco” 전달 <br /> - 카카오페이: `kakaopay` <br /> - 엘페이: `lpay` <br /> - 페이코: `payco` <br /> - 토스페이: `tosspay`|
      |SLIMQUOTA(슬림 할부 설정)        |부분 무이자 설정. 슬림 할부 <br /> - 형식) SLIMQUOTA(코드-개월:개월^코드-개월:개월 <br /> - 예시) SLIMQUOTA(11-2:3^34-2:3)                                                                                                         |

      <mark style="color:red;">**PC - 휴대폰 소액 결제 전용 파라미터**</mark>

      |형식                       |설명                                                                                                                                                                                                                                                                                                                                                         |
      |---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |hppdefaultcorp(통신사 코드)|휴대폰 소액결제시 기본 선택되어있는 통신사 <br /> - 기본: 기본 선택되어있는 통신사 없음 <br /> 예) KT 기본 선택 → ”hppdefaultcorp(KT)” 전달 <br /> - SKT: `SKT` <br /> - KT: `KTF` <br /> - LG 유플러스: `LGT` <br /> - 알뜰폰 전체: `MVNO` <br /> - 알뜰폰 CJ 헬로 모바일: `CJH` <br /> - 알뜰폰 티플러스: `KCT` <br /> - 알뜰폰 SK 세븐모바일: `SKL` <br />|
      |hppnofix(N 또는 Y)         |휴대폰 소액결제창에 자동 입력되는 `buyer_tel`값을 수정할 수 있는지 여부 <br /> - 기본값: 수정 가능 <br /> - Y : 수정 불가능 <br /> - N : 수정 가능(기본) <br />                                                                                                                                                                                              |

      ```json
      {
        "pg": "welcome",
        "bypass": {
          "welcome": {
            "acceptmethod": [
              "SKIN(#fc6b2d)", // 결제창 배경 색상 #fc6b2d
              "below1000", // 1,000원 이하 결제 허용
              "paypopup", // 안심 클릭을 팝업으로 렌더링
              "onlyeasypaycode(kakaopay:payco)", // 카드 결제창 내 간편결제는 카카오페이와 페이코만 렌더링
              "hppdefaultcorp(KT)", // 휴대폰 소액결제시 KT 기본 선택
              "hppnofix(Y)" // 휴대폰 소액결제시 결제 창 내에서 구매자 전화번호 수정 불가능
            ]
          }
        }
      }
      ```

      **`bypass.P_RESERVED`** <mark style="color:green;">**array**</mark>

      <mark style="color:red;">**모바일 - 카드 결제 전용 파라미터**</mark>

      |형식       |설명                                                      |
      |-----------|----------------------------------------------------------|
      |below1000=Y|1,000원 미만 결제 허용 여부 <br /> - 기본값: 허용하지 않음|

      <mark style="color:red;">**모바일 - 휴대폰 소액 결제 전용 파라미터**</mark>

      |형식                          |설명                                                                                                                                                                                                                                                                                                                                                     |
      |------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |hpp\_default\_corp=통신사 코드|휴대폰 소액결제시 기본 선택되어있는 통신사 <br /> - 기본: 기본 선택되어있는 통신사 없음 <br /> 예) KT 기본 선택 → ”hpp\_default\_corp=KT” 전달 <br /> - SKT: `SKT` <br /> - KT: `KTF` <br /> - LG 유플러스: `LGT` <br /> - 알뜰폰 전체: `MVNO` <br /> - 알뜰폰 CJ 헬로 모바일: `CJH` <br /> - 알뜰폰 티플러스: `KCT` <br /> - 알뜰폰 SK 세븐모바일: `SKL`|
      |hpp\_nofix=Y 또는 N           |휴대폰 소액결제창에 자동 입력되는 buyer\_tel값을 수정할 수 있는지 여부 <br /> - 기본: 수정 가능 <br /> - Y : 수정 불가능 <br /> - N : 수정 가능(기본) <br />                                                                                                                                                                                             |

      ```json
      {
        "pg": "welcome",
        "bypass": {
          "welcome": {
            "P_RESERVED": [
              "below1000=Y", // 1,000원 이하 결제 허용
              "hpp_default_corp=KT", // 휴대폰 소액결제시 KT 기본 선택
              "hppnofix=Y" // 휴대폰 소액결제시 결제 창 내에서 구매자 전화번호 수정 불가능
            ]
          }
        }
      }
      ```
    </Details>

    <Details>
      <p slot="summary">
        <strong>웰컴페이먼츠 지원 결제 수단</strong>
      </p>

      - card + 에스크로, 다이렉트
      - vbank + 에스크로
      - trans + 에스크로
      - phone
      - culturegift
      - lpay
      - kakaopay
      - payco
      - tosspay
    </Details>
  </Tab>

  <Tab title="빌링키 발급 창 요청">
    일반 결제 창 호출 파라미터에서 **customer\_uid**, **customer\_id**값을 추가하면 빌링키 발급 창을 호출할 수 있습니다.
    빌링키 발급 창에서 빌링키를 발급 받은 후, 빌링 결제 API를 호출해 해당 빌링키로 결제를 할 수 있습니다.

    ```ts title="Javascript SDK"
    IMP.request_pay(
      {
        pg: "welcome.{MID}",
        pay_method: "card", // 빌링키 발급 수단입니다. 웰컴페이먼츠의 경우 'card'만 지원됩니다.
        merchant_uid: "orderMonthly0001", // 고객사에서 채번한 주문 고유 번호입니다.
        name: "빌링키 발급",
        amount: 1000, // 전달한 결제 금액 만큼 실제로 승인되지는 않으며, 단순히 빌링키 발급 창에 표기 용도입니다.
        customer_uid: "your-customer-unique-id", // 고객사가 구매자의 결제 수단을 특정하기 위해 채번한 고유 ID로 빌링키 발급시 필수 입력입니다.
        customer_id: "matthew", // 고객사가 회원에게 부여한 고유 ID입니다.
        buyer_email: "test@portone.io",
        buyer_name: "포트원",
        buyer_tel: "02-1234-1234",
        m_redirect_url: "{모바일에서 빌링키 발급 완료 후 리디렉션 될 URL}",
      },
      function (rsp) {
        const { imp_uid, merchant_uid } = rsp;

        // 콜백 함수로 전달 받은 imp_uid로 포트원 결제 내역 조회 API를 통해 빌링키 발급 상태를 판단합니다.
      },
    );
    ```

    <Details>
      <p slot="summary"><strong>주요 파라미터 설명</strong></p>

      **`pg`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`welcome`**</mark>

      **PG사 구분코드**

      **`merchant_uid`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **주문 번호**

      매번 고유하게 채번되어야 합니다.

      **`amount`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`integer`**</mark>

      **결제 금액**

      <mark style="color:green;">**string**</mark> 이 아닌 점에 유의하세요.

      전달한 결제 금액 만큼 실제로 승인되지는 않으며, 단순히 빌링키 발급 창에 표기 용도입니다.

      **`pay_method`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`card`**</mark>

      **빌링키 발급 수단**

      웰컴페이먼츠의 경우, 빌링키 발급 수단은 `card`만 허용되며 <mark style="color:red;">**반드시 `card`를 필수로 입력해주셔야**</mark> 합니다.

      **`customer_uid`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **빌링키 발급 수단 고유 ID**

      고객사가 구매자의 빌링키 발급 수단을 특정하기 위해 채번한 고유 번호로 빌링키 발급시 필수 입력입니다.

      **`customer_id`** <mark style="color:green;">**string**</mark>

      **구매자 고유 ID**

      고객사가 구매자를 특정하기 위해 채번한 고유 번호입니다.

      **`buyer_name`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 이름**

      주의: 웰컴페이먼츠의 경우 구매자 이름은 필수 입력입니다.

      **`buyer_tel`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 연락처**

      주의: 웰컴페이먼츠의 경우 구매자 연락처는 필수 입력입니다.

      **`buyer_email`** <mark style="color:green;">**string**</mark>

      **구매자 이메일 주소**

      **`m_redirect_url`** <mark style="color:green;">**string**</mark>

      **모바일 환경에서 트랜잭션 종료 후 302 리디렉션 될 URL**

      주의: 웰컴페이먼츠의 경우 <mark style="color:red;">**모바일 환경에서 필수 입력**</mark>입니다.

      **`notice_url`** <mark style="color:green;">**string** 또는 **string\[]**</mark>

      **트랜잭션 종료 후 웹훅이 발송 될 고객사 서버 URL**

      주의: notice\_url 파라미터 설정시, 콘솔에 설정 된 웹훅 URL은 override 되며 notice\_url에 전달 한 주소로만 웹훅이 발송됩니다.

      **`period`** <mark style="color:green;">**object**</mark>

      **서비스 제공 기간**

      (from과 to) 또는 interval 중 하나만 입력 가능합니다.

      - **`from`**: 서비스 제공 시작 시각

      - **`to`**: 서비스 제공 종료 시각

        - YYYY-MM-DD
        - YYYY-MM-DD HH:mm:ss
        - YYYYMMDD
        - YYYYMMDDHHmmss

        웰컴페이먼츠의 경우

        - PC: 날짜까지만 입력 가능하며 시간은 무시됩니다.
        - 모바일: 날짜와 시간 모두 입력 가능하며 초는 무시됩니다.

      - **`interval`**: 서비스 제공 간격
        - 1m: 매월 정기결제
        - 1y: 매년 정기결제

      **`bypass.logo_url`** <mark style="color:green;">**string**</mark>

      결제창에 노출 될 메인 로고 URL(크기: 89x19)로 <mark style="color:red;">**PC 전용**</mark> 파라미터입니다.

      **`bypass.logo_2nd`** <mark style="color:green;">**string**</mark>

      결제창에 노출 될 서브 로고 URL(크기: 64x13)로 <mark style="color:red;">**PC 전용**</mark> 파라미터입니다.
    </Details>

    <Details>
      <p slot="summary">
        <strong>웰컴페이먼츠 지원 빌링키 발급 수단</strong>
      </p>

      - card
    </Details>
  </Tab>

  <Tab title="빌링키 발급과 동시에 결제 창 요청">
    ```ts title="Javascript SDK"
    IMP.request_pay(
      {
        pg: "welcome.{상점 ID}",
        pay_method: "phone", // 빌링키 발급 및 결제 수단입니다. 웰컴페이먼츠의 경우 'phone'만 지원합니다.
        merchant_uid: "orderNo0001", // 고객사에서 채번한 주문 고유 번호입니다.
        name: "주문명:결제테스트",
        amount: 1000, // 전달한 금액 만큼 실제로 승인이 됩니다.
        customer_uid: "your-customer-unique-id", // 고객사가 구매자의 결제 수단을 특정하기 위해 채번한 고유 ID로 빌링키 발급시 필수 입력입니다.
        customer_id: "matthew", // 고객사가 회원에게 부여한 고유 ID입니다.
        buyer_email: "test@portone.io",
        buyer_name: "구매자이름",
        buyer_tel: "010-1234-5678",
        m_redirect_url: "{모바일에서 결제 완료 후 리디렉션 될 URL}",
      },
      function (rsp) {
        // callback 로직
        const { imp_uid, merchant_uid } = rsp;

        // 콜백 함수로 전달 받은 imp_uid로 포트원 결제 내역 조회 API를 통해 결제 상태를 판단합니다.
      },
    );
    ```

    <Details>
      <p slot="summary"><strong>주요 파라미터 설명</strong></p>

      **`pg`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`welcome`**</mark>

      **PG사 구분코드**

      **`merchant_uid`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **주문 번호**

      매번 고유하게 채번되어야 합니다.

      **`amount`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`integer`**</mark>

      **결제 금액**

      <mark style="color:green;">**string**</mark> 이 아닌 점에 유의하세요.

      **`pay_method`** <mark style="color:red;">**\***</mark> <mark style="color:purple;">**`phone`**</mark>

      **빌링키 발급 및 결제 수단을**

      - phone (휴대폰소액결제)

      웰컴페이먼츠의 경우, 빌링키 발급 동시에 결제 수단은 `phone`만 허용되며 <mark style="color:red;">**반드시 `phone`을 필수로 입력해주셔야**</mark> 합니다.

      **빌링키 발급 수단 고유 ID**

      고객사가 구매자의 빌링키 발급 수단을 특정하기 위해 채번한 고유 번호로 빌링키 발급시 필수 입력입니다.

      **`customer_id`** <mark style="color:green;">**string**</mark>

      **구매자 고유 ID**

      고객사가 구매자를 특정하기 위해 채번한 고유 번호입니다.

      **`buyer_name`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 이름**

      주의: 웰컴페이먼츠의 경우 구매자 이름은 필수 입력입니다.

      **`buyer_tel`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **구매자 연락처**

      주의: 웰컴페이먼츠의 경우 구매자 연락처는 필수 입력입니다.

      **`buyer_email`** <mark style="color:green;">**string**</mark>

      **구매자 이메일 주소**

      **`m_redirect_url`** <mark style="color:green;">**string**</mark>

      **모바일 환경에서 트랜잭션 종료 후 302 리디렉션 될 URL**

      주의: 웰컴페이먼츠의 경우 <mark style="color:red;">**모바일 환경에서 필수 입력**</mark>입니다.

      **`notice_url`** <mark style="color:green;">**string** 또는 **string\[]**</mark>

      **트랜잭션 종료 후 웹훅이 발송 될 고객사 서버 URL**

      주의: notice\_url 파라미터 설정시, 콘솔에 설정 된 웹훅 URL은 override 되며 notice\_url에 전달 한 주소로만 웹훅이 발송됩니다.

      **`confirm_url`** <mark style="color:green;">**string**</mark>

      **트랜잭션 승인 직전 최종 승인 여부를 질의 할 고객사 서버 URL**

      트랜잭션 승인 직전, 포트원 서버에서 confirm\_url로 트랜잭션 최종 승인 여부를 질의하게 되며 200 외의 응답을 받은 경우 트랜잭션은 중단됩니다.

      **`currency`** <mark style="color:purple;">**`KRW`**</mark>

      **결제 통화**

      웰컴페이먼츠의 경우 KRW만 허용되며, 미 입력시 KRW로 자동 적용됩니다.

      **`digital`** <mark style="color:red;">**\***</mark> <mark style="color:green;">**string**</mark>

      **실물/컨텐츠 여부**

      **`period`** <mark style="color:green;">**object**</mark>

      **서비스 제공 기간**

      (from과 to) 또는 interval 중 하나만 입력 가능합니다.

      주의: <mark style="color:red;">**모바일 환경에서는 지원하지 않습니다.**</mark>

      - **`from`**: 서비스 제공 시작 시각

      - **`to`**: 서비스 제공 종료 시각

        - YYYY-MM-DD
        - YYYY-MM-DD HH:mm:ss
        - YYYYMMDD
        - YYYYMMDDHHmmss

        웰컴페이먼츠의 경우

        - PC: 날짜까지만 입력 가능하며 시간은 무시됩니다.
        - 모바일: 날짜와 시간 모두 입력 가능하며 초는 무시됩니다.

      - **`interval`**: 서비스 제공 간격
        - 1m: 매월 정기결제
        - 1y: 매년 정기결제

      **`bypass.acceptmethod`** <mark style="color:green;">**array**</mark>

      <mark style="color:red;">**PC - 휴대폰 소액 결제 전용 파라미터**</mark>

      |형식                       |설명                                                                                                                                                                                                                                                                                                                                                         |
      |---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |hppdefaultcorp(통신사 코드)|휴대폰 소액결제시 기본 선택되어있는 통신사 <br /> - 기본: 기본 선택되어있는 통신사 없음 <br /> 예) KT 기본 선택 → ”hppdefaultcorp(KT)” 전달 <br /> - SKT: `SKT` <br /> - KT: `KTF` <br /> - LG 유플러스: `LGT` <br /> - 알뜰폰 전체: `MVNO` <br /> - 알뜰폰 CJ 헬로 모바일: `CJH` <br /> - 알뜰폰 티플러스: `KCT` <br /> - 알뜰폰 SK 세븐모바일: `SKL` <br />|
      |hppnofix(N 또는 Y)         |휴대폰 소액결제창에 자동 입력되는 `buyer_tel`값을 수정할 수 있는지 여부 <br /> - 기본값: 수정 가능 <br /> - Y : 수정 불가능 <br /> - N : 수정 가능(기본) <br />                                                                                                                                                                                              |

      ```json
      {
        "pg": "welcome",
        "bypass": {
          "welcome": {
            "acceptmethod": [
              "SKIN(#fc6b2d)", // 결제창 배경 색상 #fc6b2d
              "below1000", // 1,000원 이하 결제 허용
              "paypopup", // 안심 클릭을 팝업으로 렌더링
              "onlyeasypaycode(kakaopay:payco)", // 카드 결제창 내 간편결제는 카카오페이와 페이코만 렌더링
              "hppdefaultcorp(KT)", // 휴대폰 소액결제시 KT 기본 선택
              "hppnofix(Y)" // 휴대폰 소액결제시 결제 창 내에서 구매자 전화번호 수정 불가능
            ]
          }
        }
      }
      ```

      **`bypass.P_RESERVED`** <mark style="color:green;">**array**</mark>

      <mark style="color:red;">**모바일 - 휴대폰 소액 결제 전용 파라미터**</mark>

      |형식                          |설명                                                                                                                                                                                                                                                                                                                                                     |
      |------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |hpp\_default\_corp=통신사 코드|휴대폰 소액결제시 기본 선택되어있는 통신사 <br /> - 기본: 기본 선택되어있는 통신사 없음 <br /> 예) KT 기본 선택 → ”hpp\_default\_corp=KT” 전달 <br /> - SKT: `SKT` <br /> - KT: `KTF` <br /> - LG 유플러스: `LGT` <br /> - 알뜰폰 전체: `MVNO` <br /> - 알뜰폰 CJ 헬로 모바일: `CJH` <br /> - 알뜰폰 티플러스: `KCT` <br /> - 알뜰폰 SK 세븐모바일: `SKL`|
      |hpp\_nofix=Y 또는 N           |휴대폰 소액결제창에 자동 입력되는 buyer\_tel값을 수정할 수 있는지 여부 <br /> - 기본: 수정 가능 <br /> - Y : 수정 불가능 <br /> - N : 수정 가능(기본) <br />                                                                                                                                                                                             |

      ```json
      {
        "pg": "welcome",
        "bypass": {
          "welcome": {
            "P_RESERVED": [
              "below1000=Y", // 1,000원 이하 결제 허용
              "hpp_default_corp=KT", // 휴대폰 소액결제시 KT 기본 선택
              "hppnofix=Y" // 휴대폰 소액결제시 결제 창 내에서 구매자 전화번호 수정 불가능
            ]
          }
        }
      }
      ```
    </Details>

    <Details>
      <p slot="summary">
        <strong>웰컴페이먼츠 지원 빌링키 발급과 동시에 결제 수단</strong>
      </p>

      - phone
    </Details>
  </Tab>
</Tabs>

<Details>
  <p slot="summary">
    <strong>가능한 트랜잭션 환경</strong>
  </p>

  - PC (iframe)
  - 모바일 (리디렉션)
</Details>

## 웰컴페이먼츠 연동 주의사항

## 웰컴페이먼츠와 사전 계약이 필요한 경우

아래 기능을 사용하시려면 웰컴페이먼츠에 사전 신청 후 계약이 완료되어야 합니다. 그렇지 않은 상태에서
해당 기능 이용시 결제 승인에 실패하거나, 승인에 성공하더라도 의도한 바와는 다른 응답(예: 결제창에서
에스크로 결제를 했으나 비-에스크로 결제 응답을 받음)을 얻게 될 수 있으니 주의 해주시기 바랍니다.

- 간편결제 사용
- 면세 / 복합과세 / 지정금액 방식 사용
- 할부 사용
- 상점 부담 무이자 할부 사용
- 카드사 포인트 사용
- 에스크로 사용
- 휴대폰 실물 / 컨텐츠 사용
- 휴대폰 빌링키 발급과 동시에 결제 실물 / 컨텐츠 사용

## 테스트 모드 유의사항

### 테스트 모드에서 확인 불가능한 일부 기능/파라미터 존재

- 일부 간편결제(LPAY, 페이코) 결제 테스트 불가능
- 카드사 포인트 사용(useCardPoint 파라미터) 테스트 불가능
- 계좌이체 뱅크페이 QR 코드 결제 불가능

### 실제 카드사와 통신을 하지 않기 때문에 결제창 호출시 전달 한 결제 정보 그대로 승인 결과가 내려감

예를 들어 체크 카드는 할부 결제가 불가능하기 때문에, 운영 환경에서는 할부 파라미터를 설정 후 실제 카드사 앱에서 체크 카드로 결제시 승인에 실패합니다.

하지만 테스트 환경의 경우, 할부 파라미터를 설정 후 실제 카드사 앱에서 체크 카드로 결제해도 승인에
성공하며, 승인 결과로 할부 개월수는 0(일시불)이 아닌, 결제창 호출시 전달 한 값 그대로 리턴됩니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 1. 국민카드 5개월 할부 다이렉트 호출
  {
    "pg": "welcome",
    "pay_method": "card",
    "amount": "50000",
    "card": {
      "direct": { // 국민카드 5개월 할부 다이렉트 호출
        "code": "381",
        "quota": 5
      }
    }
  }

  // 2. 국민카드 앱에서 체크카드로 결제
  // 3. 승인 응답 결과 할부 개월수가 5로 전달 됨
  // GET /payments/{imp_uid}
  {
    "card_quota": 5
  }
  ```
</Details>

## 공통 유의사항

### 구매자 연락처(PC만), 이름, 주문명, 주문번호는 필수 입력

웰컴페이먼츠의 경우 구매자 연락처(PC만), 이름, 주문명 그리고 주문번호는 필수 입력입니다.

### IOS 앱 결제시 고객사 커스텀 앱 URL 스킴 파라미터(`app_scheme`)는 필수 입력

IOS 앱 결제시, 고객사 커스텀 앱 URL 스킴 파라미터(예) `portone://`)는 필수로 입력하셔야 합니다.

단, <mark style="color: red;">**반드시 모바일 앱일때만 입력**</mark>하셔야 하며 모바일 웹일때 입력하실 경우, 정상적으로 동작하지 않을 수 있으니 유의하시기 바랍니다.

### IOS에서 서드 파티 앱에서 인증 후 수동으로 복귀해야 함

IOS 모바일 웹/인앱 브라우저에서 결제창 호출 후 카드사 앱으로 이동해 인증을 완료한 경우, 다시 브라우저로 복귀하기 위해서는 수동으로 이동해주셔야 합니다.

### 현금영수증 옵션은 자진 발급만 지원

웰컴페이먼츠 가상계좌 발급, 계좌이체와 같은 현금성 결제시 현금영수증 옵션을 전달할 수 있습니다.

단, 현금영수증 자진발급(`anonymous`) 옵션만 지원하기 때문에 현금영수증 발행 식별 정보 파라미터(`customerIdentifier`)는 지원하지 않습니다.

<Details>
  <p slot="summary">지원 가능: 현금영수증 자진 발급</p>

  ```json
  {
    // 현금영수증 자진 발급
    "pg": "welcome",
    "pay_method": "vbank",
    "bypass": {
      "cashReceiptType": "anonymous"
    }
  }
  ```
</Details>

<Details>
  <p slot="summary">지원 불가: 현금영수증 소득공제/지출증빙</p>

  ```json
  // 현금영수증 소득공제
  {
    "pg": "welcome",
    "pay_method": "trans",
    "bypass": {
      "cashReceiptType": "personal",
      "customerIdentifier": "01012345678"
    }
  }
  // 웰컴페이먼츠에서 제공하지 않는 현금영수증 발급 유형(CASH_RECEIPT_TYPE_PERSONAL)입니다.

  // 현금영수증 지출증빙
  {
    "pg": "welcome",
    "pay_method": "trans",
    "bypass": {
      "cashReceiptType": "corporate",
      "customerIdentifier": "1178178260"
    }
  }
  // 웰컴페이먼츠에서 제공하지 않는 현금영수증 발급 유형(CASH_RECEIPT_TYPE_CORPORATE)입니다.
  ```
</Details>

## 제공기간 파라미터(`period`)

### 날짜(`from`과 `to`)와 간격(`interval`) 둘 중 하나만 사용 가능

제공기간 파라미터는 (from과 to) 또는 interval만 입력 가능하며 셋 다 입력은 불가능합니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // period: { from: "2023-01-01", to: "2023-03-01", interval: "1m" }
  {
    "error_msg": "제공 기간은 range와 interval 둘 중 하나만 입력해주세요"
  }
  ```
</Details>

또한 from과 to를 입력하는 경우 둘 다 입력해야하며 둘 중 하나만 입력은 불가능합니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // period: { from: "2023-01-01" }
  {
    "error_msg": "웰컴페이먼츠의 경우 제공 기간은 시작 날짜와 종료 날짜를 모두 입력하셔야 합니다. (둘 중 하나만 입력 불가)"
  }

  // period: { to: "2023-03-01" }
  {
    "error_msg": "웰컴페이먼츠의 경우 제공 기간은 시작 날짜와 종료 날짜를 모두 입력하셔야 합니다. (둘 중 하나만 입력 불가)"
  }
  ```
</Details>

### 날짜(`from`과 `to`)의 경우 PC와 모바일 지원 형식이 다름

웰컴페이먼츠의 경우 제공기간 파라미터에 대해 PC의 경우 날짜까지만 표기되지만 모바일의 경우 분까지 표기됩니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  {
    "period": { "from": "2023-01-01 00:00:00", "to": "2023-03-01 23:59:59" }
  }
  // PC에서는 "2023-01-01 ~ 2023-03-01"로 표기(시간 정보 무시)
  // 모바일에서는 "2023-01-01 00:00 ~ 2023-03-01 23:59"로 표기(초 정보 무시)
  ```
</Details>

### 간격(`interval`)은 1m 또는 1y만 허용 됨

웰컴페이먼츠의 경우 제공 기간을 간격으로 입력하는 경우, 1m 또는 1y만 허용됩니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 옵션1. interval을 1m로 설정
  {
    "period": { "interval": "1m" }
  }

  // 옵션2. interval을 1y로 설정
  {
    "period": { "interval": "1y" }
  }

  // 옵션 3. interval을 1d로 설정
  {
    "period": { "interval": "1d" }
  }
  -> 웰컴페이먼츠 제공 기간 주기가 올바르지 않습니다. 1m 또는 1y만 허용됩니다.
  ```
</Details>

### 모바일 환경 - 휴대폰 결제시 제공 기간 파라미터(`period`)를 지원하지 않음

모바일 환경에서는 휴대폰 결제 / 빌링키 발급과 동시에 결제시 제공 기간 파라미터(`period`)를 지원하지 않습니다.

## 휴대폰 일반 결제/빌링키 발급과 동시에 결제

### 상품 유형 파라미터(`digital`)는 필수 입력

웰컴페이먼츠의 경우 **휴대폰 소액결제시 상품 유형을 구분 짓는 `digital` 파라미터가 필수**로 요구됩니다.
상품 유형이 디지털 컨텐츠인 경우 `true`를, 실물인 경우엔 `false`를 전달합니다.

### 렌더링을 허용 할 통신사 리스트 옵션과 기본 선택 될 통신사 옵션은 함께 사용할 수 없음

렌더링을 허용 할 통신사 리스트(`phone.detail`) 옵션과 기본 선택 될 통신사 옵션(`bypass.welcome.acceptmethod.hppdefaultcorp(통신사)`/`P_RESERVED.hpp_default_corp=통신사`)은 함께 사용할 경우 정상적으로 동작하지 않아 둘 중 하나만 사용해야 합니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 옵션1. SKT와 KT만 렌더링을 허용 -> 정상 동작
  {
    "phone": {
      "detail": [
        { "carrier": "SKT", "enabled": true },
        { "carrier": "KTF", "enabled": true }
      ]
    }
  }

  // 옵션2. SKT를 기본 선택 -> 정상 동작
  {
    "bypass": {
      "welcome": {
        "acceptmethod": ["hppdefaultcorp(SKT)"],
        "P_RESERVED": ["hpp_default_corp=SKT"]
      }
    }
  }

  // 옵션3. 옵션 1 + 옵션 2 -> 정상 동작하지 않음
  {
    "phone": {
      "detail": [
        { "carrier": "SKT", "enabled": true },
        { "carrier": "KTF", "enabled": true }
      ]
    },
    "bypass": {
      "welcome": {
        "acceptmethod": ["hppdefaultcorp(SKT)"],
        "P_RESERVED": ["hpp_default_corp=SKT"]
      }
    }
  }
  ```
</Details>

## 일반결제 유의사항

### 카드 결제

#### PC 환경에서는 할부 개월수에 일시불이 기본 포함 됨

웰컴페이먼츠의 경우 PC 환경에서는 일시불이 기본으로 포함되기 때문에, 할부 개월수에 0(일시불)을 넣지 않더라도 결제창에 자동으로 표기됩니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  {
    "pg": "welcome",
    "pay_method": "card",
    "display": {
      "card_quota": [2,3,4,5,6] // 일시불 + 2개월 ~ 6개월까지 결제창에 표기
    }
  }
  ```
</Details>

#### PC 환경에서는 할부 옵션을 설정하지 않는 경우 무조건 일시불로 결제 됨

웰컴페이먼츠의 경우 PC 환경에서 <mark color="red">**할부 옵션을 전달하지 않는 경우 `무조건 일시불만 표기`**</mark>되니 주의하시기 바랍니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 일시불만 표기
  {
    "pg": "welcome",
    "pay_method": "card"
  }

  // 일시불 + 2개월 ~ 6개월까지 결제창에 표기
  {
    "pg": "welcome",
    "pay_method": "card",
    "display": {
      "card_quota": [2,3,4,5,6] // 일시불 + 2개월 ~ 6개월까지 결제창에 표기
    }
  }
  ```
</Details>

#### 카드사 다이렉트 호출시 고정 할부 개월수는 필수 입력

웰컴페이먼츠의 경우 **카드사 다이렉트 호출시 고정 할부 개월수는 필수 입력**입니다.
따라서 카드사 다이렉트 호출시 리스트 할부 개월수는 입력할 수 없습니다.

예를 들어, BC카드 다이렉트 호출을 하고 싶은 경우 다른 PG사는 `card: { direct: { code: '361' } }`만
지정하면 되지만 웰컴페이먼츠의 경우 카드사 다이렉트 호출시 고정 할부 개월수는 필수 입력이기 때문에
할부 개월수를 함께 넘겨야 하니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 예. BC카드 5개월 할부
  {
    "pg": "welcome",
    "pay_method": "card",
    "card": {
      "direct": {
        // 다이렉트 호출 할 카드사 코드와 고정 할부 개월수를 모두 지정해야 함
        "code": "361", // BC카드
        "quota": 5 // 5개월 할부
      }
    }
  }


  // 예. 결제창에서 카드사와 할부 개월수 선택
  {
    "pg": "welcome",
    "pay_method": "card"
  }

  // 다이렉트 호출 할 카드사와 고정 할부 개월수 모두 지정하지 않아야 함
  ```
</Details>

#### 카드사 포인트 사용 불가 옵션 사용 불가능

웰컴 페이먼츠에서 카드사 포인트 사용 불가 옵션(useCardPoint: false)은 지원하지 않기 때문에 카드사
포인트 사용(useCardPoint: true) 또는 기본값(=파라미터 전달하지 않음, 결제창에서 고객이 카드사 포인트
사용 여부 결정)만 사용 가능합니다.

카드사 포인트 사용 불가 옵션 설정시 “결제 창 호출에 실패하였습니다. 웰컴페이먼츠의 경우 카드사
포인트 사용 불가 옵션은 사용할 수 없습니다.”라는 에러 메시지가 리턴되면서 결제창이 호출되지 않으니
참고 부탁드립니다.

#### 카카오뱅크 카드는 일시불만 지원함

카카오뱅크 카드로 결제시 결제 금액이 5만원 이상이라고 하더라도 할부가 불가능하기 때문에 무조건 일시불로 결제됩니다.

#### ISP 계열 카드의 경우 할부 개월수에 무이자 표기 되지 않음

ISP 계열 카드의 경우, 결제 요청시 페이북 팝업/앱으로 넘어가는데 무이자 할부 적용 조건이 되더라도 할부 개월수 리스트에 (무) 표기가 되지 않습니다.

단, 해당 카드사, 결제 금액, 할부 개월수가 무이자 조건을 만족하는 경우 승인시 무이자가 자동 적용됩니다.

#### 모바일 환경에서 고정/리스트 할부 개월수 최대 값은 36

모바일 환경에서 웰컴페이먼츠 카드 결제시, 고정/리스트할부 개월수 최대 값은 36으로 37 이상의 값을 입력할 경우 결제창이 호출되지 않으니 참고하시기 바랍니다.

PC 환경에서는 별도 제한이 없습니다.

### 가상계좌 발급

#### `vbank_due` 파라미터는 "분" 까지만 유효하며 시간 값은 무시 됨

가상계좌 발급시 입금 기한을 의미하는 `vbank_due` 파라미터는 아래 4가지 형식 중 하나로 입력이 가능합니다.

- YYYYMMDD
- YYYYMMDDHHmmss
- YYYY-MM-DD
- YYYY-MM-DD HH:mm:ss

단, 웰컴페이먼츠의 경우 전달 한 초 값은 무시되며 무조건 59초로 설정되니 유의하시기 바랍니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  {
    "vbank_due": "2023-01-01 12:34:56"
  }
  // 입금 기한이 "2023-01-01 12:34:59"로 설정 됨
  ```
</Details>

### 상품권 결제

#### 문화 상품권(culturegift)만 지원

웰컴페이먼츠의 경우 상품권 결제시 문화 상품권만 지원하며 북앤라이프, 컬쳐랜드, 해피머니 그리고 스마트 문상은 지원하지 않습니다.

### 간편 결제

#### 토스페이의 경우, 할부 개월수 리스트는 전달한 값과 카드사가 제공하는 무이자 할부 개월 수의 최대값까지 표기 됨

예를 들어 할부 개월수 리스트를 3개월까지 렌더링 되도록 설정했으나, 현재 해당 카드사에서 6개월까지 무이자 할부 이벤트가 진행되고 있다면 할부 개월수는 6개월까지 표기 됩니다.

<Details>
  <p slot="summary">파라미터 예제 코드</p>

  ```json
  // 예) 할부 개월수를 3개월까지 렌더링 되도록 설정
  {
    "pg": "welcome",
    "pay_method": "card",
    "display": {
      "card_quota": [2,3]
    }
  }

  // 결과) 테스트 당시 우리카드가 6개월까지 무이자 할부 이벤트가 진행중이기 때문에 6개월까지 할부 개월수가 렌더링 됨
  ```
</Details>

#### 카카오페이의 경우, 카드 정보를 제공하지 않음

카카오페이에 등록 된 카드로 결제시 카카오페이에서 카드 정보를 내려주지 않기 때문에 카드 정보를 확인할 수 없습니다.

## 빌링키 발급 유의사항

### 빌링키 발급 수단(`pay_method`)은 필수 입력이며 카드(`card`)만 허용 됨

웰컴페이먼츠의 경우 빌링키 발급 수단은 카드만 허용되며, 휴대폰의 경우 빌링키 발급과 동시에 결제만 가능합니다.

### 실제 승인이 되지 않고 빌링키 발급만 됨

금액(amount) 파라미터는 필수 입력이며, <mark color="red">**전달 한 금액(amount)만큼 실제로 승인이 되지 않고** 단순히 빌링키 발급 창에 표기 될 용도로만 사용됩니다.</mark>

### 면세 금액(tax\_free)과 부가세(vat\_amount)는 지원하지 않음

빌링키 발급만 되고 실제 승인은 되지 않기 때문에 면세 금액과 부가세는 지원하지 않으며, 전달해도 무시됩니다.

## 빌링키 발급과 동시에 결제 유의사항

### 빌링키 발급 및 결제 수단(`pay_method`)은 필수 입력이며 휴대폰(`phone`)만 허용 됨

웰컴페이먼츠의 경우 빌링키 발급 및 결제 수단은 휴대폰만 허용되며, 카드의 경우 빌링키 발급만 가능합니다.

### 실제 승인이 됨

금액(amount) 파라미터는 필수 입력이며, <mark color="red">**전달 한 금액(amount)만큼 실제로 승인이 됩니다.**</mark>

### 면세 금액(tax\_free)과 부가세(vat\_amount)는 지원하지 않음

웰컴페이먼츠의 경우 빌링키 발급과 동시에 결제시, 실제 승인이 되지만 면세 금액과 부가세는 지원하지 않으며, 전달해도 무시됩니다.

### 제공기간 파라미터(`phone`)는 지원하지 않으며 무조건 “월 자동결제”로 표기 됨

웰컴페이먼츠 빌링키 발급 및 결제는 휴대폰만 허용하고 휴대폰의 경우 통신사 정책에 의해 무조건 매월 자동결제만 허용됩니다.

따라서 제공기간 파라미터는 지원되지 않으며, PG 창의 제공기간 영역에 무조건 "월 자동결제"로 표기됩니다.

## 에스크로 유의사항

### 에스크로 결제의 경우 고객사가 임의로 취소할 수 없음

에스크로 결제건의 경우에는 기본적으로 구매자가 구매거절을 하지 않으면 고객사가 임의로 거래를 취소할 수 없습니다.

만약 에스크로 구매동의와 관계없이 고객사가 거래를 취소할 수 있도록 설정하고 싶은 경우에는 웰컴페이먼츠와 별도로 협의가 필요합니다.

## 웰컴페이먼츠 API 연동

## 지원 기능

- 가상 계좌 발급, 회수
- 현금영수증 발급, 취소, 조회
- 외부 결제건 현금영수증 발급, 취소, 조회
- 빌링키 발급
- 예약결제
- 에스크로 등록, 조회
- 결제건 환불

## 추가된 파라미터

### `pay_method` 파라미터 추가

- 포트원을 통하지 않은 외부 결제건에 대한 현금영수증 발급시 필수로 요구되는 파라미터로 trans(계좌이체), vbank(가상계좌) 만 지정 가능합니다.

- 사용가능한 API
  - 현금영수증 발급(외부) API

### `products` 파라미터 추가

에스크로 배송 정보 등록 및 수정 시 상품들에 대한 정보를 입력하는 파라미터로 필수로 요구됩니다.

```json
{
  "products": {
    "id": "상품 고유 아이디 (required)",
    "name": "상품 이름",
    "code": "상품 고유 코드",
    "amount": "상품 단위 가격 (required)",
    "currency": "상품 단위 가격 화폐 (default: KRW)",
    "quantity": "상품 수량 (defatul: 1)",
    "tag": "상품의 카테고리"
  }
}
```

### `corp_reg_no` 파라미터 추가

외부 결제건의 현금영수증 발급 시, 사업자 등록번호를 입력하는 파라미터로 필수로 요구됩니다.

- 계좌이체 : trans
- 가상계좌 : vbank

## API 별 상세 설명

### 빌링키 결제

- 요청 URL: `https://api.iamport.kr/subscribe/again`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**
  - `customer_uid`
  - `merchant_uid`
  - `amount`
  - `buyer_name`

- 주의사항
  - `tax_free` 파라미터는 `부가세업체정함` 설정 고객사에 한해 사용 가능합니다.

  - `vat_amount` 파라미터는 `부가세업체정함` 설정업체에 한해 사용 가능하며 전체금액의 10%이하로 설정
    해야합니다. vat\_amount 가 총 상품가격의 10% 초과할 경우는 결제가 거절됩니다.

### 키인 결제

- 요청 URL: `https://api.iamport.kr/subscribe/onetime`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**

  - `merchant_uid`
  - `card_number`
  - `expiry`
  - `buyer_name`

- 주의사항
  - `tax_free` 파라미터는 `부가세업체정함` 설정 고객사에 한해 사용 가능합니다.

  - `vat_amount` 파라미터는 `부가세업체정함` 설정업체에 한해 사용 가능하며 전체금액의 10%이하로 설정
    해야합니다. vat\_amount 가 총 상품가격의 10% 초과할 경우는 결제가 거절됩니다.

### 예약 결제

- 요청 URL: `https://api.iamport.kr/subscribe/schedule`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**

  - `schedules.merchant_uid`
  - `schedules.amount`
  - `schedules.buyer_name`

- 주의 사항

  - `tax_free` 파라미터는 `부가세업체정함` 설정 고객사에 한해 사용 가능합니다.

  - `vat_amount` 파라미터는 `부가세업체정함` 설정업체에 한해 사용 가능하며 전체금액의 10%이하로 설정
    해야합니다. vat\_amount 가 총 상품가격의 10% 초과할 경우는 결제가 거절됩니다.

### 가상계좌 발급

- 요청 URL: `https://api.iamport.kr/vbanks`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**

  - `merchant_uid`
  - `amount`
  - `vbank_code`
  - `vbank_due`
  - `buyer_name`

- 주의 사항
  - `vbank_holder` 경우 적용되지 않고 고객사명이 사용됩니다.

  - 계좌 발급 받거나 환불금액을 입금받을 수 있는 은행 목록과 코드는
    [https://api.iamport.kr/#vbank\_codes](https://api.iamport.kr/#vbank_codes)에서 확인 가능합니다.

### 에스크로 배송 정보 등록

- 요청 URL: `https://api.iamport.kr/escrows/logis/{imp_uid}`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**
  - `imp_uid`
  - `sender.name`
  - `sender.tel`
  - `sender.postcode`
  - `sender.formed_address`
  - `receiver.name`
  - `receiver.tel`
  - `receiver.postcode`
  - `receiver.formed_address`
  - `logis.company`
  - `logis.invoice`
  - `logis.sent_at`
  - `products.id`
  - `products.name`
  - `products.amount`

- 주의 사항
  - `welcome`는 배송수정시, 지번주소/도로명주소와 상세주소를 구분하여 받고있기 때문에, 발신자의
    주소와 수신자의 주소 정보를 기존의 `sender.addr`와 `receiver.addr` 파라미터 대신 새로 추가된
    파라미터 `formed_address`의 `address_line_1`(지번주소 또는 도로명주소)와
    `address_line_2`(상제주소)에 설정해야합니다.

### 에스크로 배송 정보 수정

- 요청 URL: `https://api.iamport.kr/escrows/logis/{imp_uid}`
  - 요청 메소드: `PUT`

- **웰컴페이먼츠 필수 파라미터**
  - `imp_uid`
  - `logis.company`
  - `logis.invoice`
  - `logis.sent_at`
  - `products.id`
  - `products.name`
  - `products.amount`

- 주의 사항
  - `welcome`는 배송 정보 수정시, 지번주소/도로명주소와 상세주소를 구분하여 받고있기 때문에,
    발신자의 주소와 수신자의 주소 정보를 기존의 `sender.addr`와 `receiver.addr` 파라미터 대신 새로
    추가된 파라미터 `formed_address`의 `address_line_1`(지번주소 또는 도로명주소)와
    `address_line_2`(상제주소)에 설정해야합니다.

### 현금영수증 발급 (아임포트 결제건)

- 요청 URL: `https://api.iamport.kr/receipts/{imp_uid}`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**
  - `imp_uid`
  - `identifier`
  - `type`
  - `buyer_tel`
  - `corp_reg_no`

### 현금영수증 발급 (외부 결제건)

- 요청 URL: `https://api.iamport.kr/receipts/external/{imp_uid}`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**
  - `merchant_uid`
  - `name`
  - `amount`
  - `identifier`
  - `type`
  - `buyer_tel`
  - `corp_reg_no`
  - `pay_method`

### 결제 취소

- 요청 URL: `https://api.iamport.kr/payments/cancel`

- 요청 메소드: `POST`

- **웰컴페이먼츠 필수 파라미터**
  - `imp_uid`
  - `refund_holder` (가상계좌, 계좌이체 거래건)
  - `refund_account` (가상계좌, 계좌이체 거래건)
  - `refund_bank` (가상계좌, 계좌이체 거래건)
  - `refund_tel` (가상계좌, 계좌이체 거래건)

- 주의 사항
  - 부분 취소는 지불수단 별로 **부분환불 사용 서비스 신청 고객사에 한 해** 지원 가능합니다. 부분 환불
    사용 서비스 사용 신청 및 사용 여부 문의는 웰컴페이먼츠 계약 담당자에게 확인해주시기를 바랍니다.

  - tax\_free 파라미터는 `부가세업체정함` 설정 고객사에 한 해 결제 시 면세 금액을 지정했던 경우
    **필수** 입력 바랍니다.

  - vat\_amount 파라미터는 `부가세업체정함` 설정 고객사에 한 해 결제 시 부가세를 지정했던 경우 **필수**
    입력 바랍니다.
